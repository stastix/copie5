
	{% extends 'base.html.twig' %}
   
	{% block body %}


	<script>
		function updateRating(eventId, userRating) {
			
			const url = '{{ path('update_event_rating', {'id': 'eventId'}) }}'.replace('eventId', eventId);
			const formData = new FormData();
			formData.append('userRating', userRating);
		
			fetch(url, {
				method: 'POST',
				body: formData
			})
			.then(response => response.json())
			.then(data => {
				
				console.log(data.message);
			})
			.catch(error => {
				console.error('Error:', error);
			});
		}
		</script>




	
	
	<section class="packages pt-5">
		<div class="container py-lg-4 py-sm-3">
			<h2 class="heading text-capitalize text-center"> Discover our tour packages</h2>
			<p class="text mt-2 mb-5 text-center">Memories created while traveling are treasures that last a lifetime. Whether a deep conversation with a local, a spontaneous adventure, or simply the joy of getting lost in a new city.</p>
			<p id="aa" style="color: red;"></p>
			<div class="row">
				
				{% for event in events %}
				<div class="col-lg-3 col-sm-6 mb-5">






					



					<div class="image-tour position-relative" style="border: none;">
						<img src='{{ asset(event.imagesaif) }}' alt="" class="img-fluid" />
						<div class="rating">
							{% set roundedRating = event.rating is defined ? event.rating|round : 0 %}
							{% for i in range(1, 5) %}
								{% if roundedRating >= i %}
									<span class="fa fa-star checked" style="color: yellow;"></span>
								{% else %}
									<span class="fa fa-star" style="color: gray; border: none;"></span>
								{% endif %}
							{% endfor %}
						</div>
					</div>
					
					
					
					
					


	

					<div class="package-info">
						<h6 class="mt-1"><span class="fa fa-map-marker mr-2"></span>{{ event.destinationsaif}}</h6>
						<h5 class="my-2">{{ event.titlesaif}}</h5>
						<p class="">{{ event.typesaif}}</p>
						
						<a href="{{ path('sbooking', {'id': event.id}) }}">more details</a>
						<ul class="listing mt-3">
							<li><span class="fa fa-clock-o mr-2"></span>Duration : <span>{{ event.durationsaif}}</span></li>
						</ul>




						<!-- Your HTML template -->
						<!-- Your HTML template -->

						<script>
							function updateRating(eventId, userRating) {
							
								const url = '{{ path('update_event_rating', {'id': 'eventId'}) }}'.replace('eventId', eventId);
								const formData = new FormData();
								formData.append('userRating', userRating);
						
								fetch(url, {
									method: 'POST',
									body: formData
								})
								.then(response => response.json())
								.then(data => {
									console.log(data.message);
									
									const aaElement = document.getElementById('aa');
						
									// Update the content and set the text color based on the response message
									if (data.message === 'Rating updated successfully') {
										aaElement.textContent = 'Rating updated successfully';
										aaElement.style.color = 'green'; // Set the color to green
									} else if (data.message === 'tu est deja donner ton raiting') {
										aaElement.textContent = 'Tu est d√©j√† donn√© ton rating';
										aaElement.style.color = 'red'; // Set the color to blue or any other desired color
									}  else {
										aaElement.textContent = data.message; // You can customize this part based on your needs
										aaElement.style.color = 'red'; // Set the color to red or any other desired color
									}
								})
								.catch(error => {
									console.error('Error:', error);
								});
							}
						</script>
						
						
						
					


        
						{% if is_granted('ROLE_CLIENT') or is_granted('ROLE_GUIDE') or is_granted('ROLE_ADMIN') %}
						<label for="userRating{{ event.id }}">Rate this event:</label>
						<select id="userRating{{ event.id }}" name="userRating" onchange="updateRating({{ event.id }}, this.value)">
							<option value="" disabled selected>Select your rating</option>
							<option value="1">üåü</option>
							<option value="2">‚≠ê‚≠ê</option>
							<option value="3">‚≠ê‚≠ê‚≠ê</option>
							<option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
							<option value="5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
						</select>
						{% else %}
                        if you wanna add your rate you shoold go to :
                    <a href="{{ path('app_login') }}"> login</a>
                    {% endif %}

					</div>
				</div>
				{% endfor %} 
				
				<div class="col-lg-6 col-md-6 contact-left-form">
					<form action="{{ path('slist_evennement_choix') }}" method="post">
						
						<div class="col-sm-6 form-group contact-forms">
							<select class="form-control" name="dest">
								{% for eventd in eventsD %}
								<option>{{ eventd}}</option>
								
								{% endfor %} 
								<option>5 or more</option>
							</select>
						</div>
						<div class="col-sm-6 form-group contact-forms">
							<select class="form-control" name="type">
								{% for eventd in baw %}
								<option>{{ eventd}}</option>
								
								{% endfor %} 
								<option>5 or more</option>
							</select>
						</div>
						<div class="row">
							<div class="col-lg-3 col-sm-6 mb-5">
						<button class="btn btn-block sent-butnn">found</button>
							</div>
						</form>
						<form action="{{ path('slist_evennement') }}" method="post">
							<div class="col-lg-4 col-sm-6 mb-5">
								<button class="btn btn-block sent-butnn"> view all</button>
									</div>
								</form>
					</div >
					
				</div>
			</div>
			
		</div>
		
	</section>



	<section class="destinations py-5" id="destinations">
		<div class="container py-xl-5 py-lg-3">
			<h3 class="heading text-capitalize text-center"> Special Events just for you </h3>
			<p class="text mt-2 mb-5 text-center">Vestibulum tellus neque, sodales vel mauris at, rhoncus finibus augue. Vestibulum urna ligula, molestie at ante ut, finibus vulputate felis.</p>
			<div class="row inner-sec-w3layouts-w3pvt-lauinfo">
				<div class="row inner-sec-w3layouts-w3pvt-lauinfo">
					{% for offrespecialevenment in offrespecialevenments %}
						<div class="col-md-3 col-sm-6 col-6 destinations-grids text-center">
							<h4 class="destination mb-3">{{ offrespecialevenment.titre }}</h4>
							<div class="image-position position-relative"> 
								<img src="{{ asset('img/' ~ offrespecialevenment.image) | default(asset('hero-bg.jpg')) }}" class="img-fluid" alt="{{ offrespecialevenment.destination }}">
								<div class="rating">
									<ul>
										<li><span class="fa fa-star"></span></li>
										<li><span class="fa fa-star"></span></li>
										<li><span class="fa fa-star"></span></li>
										<li><span class="fa fa-star"></span></li>
										<li><span class="fa fa-star"></span></li>
									</ul>
								</div>
							</div>
							<div class="destinations-info">
								<div class="caption mb-lg-3">
									<h4>{{ offrespecialevenment.destination }}</h4>
									
									<a href="{{ path('sbooking', {'id': offrespecialevenment.idoffrespecialevenment}) }}">Book Now</a>
								</div>
								<div class="rating">
									<!-- Replace the stars with badge icons or images -->
									<ul>
										{% if offrespecialevenment.niveau == 'bronze' %}
											<li><span class="badge badge-bronze" style="color: bronze;">Bronze users</span></li>
										{% elseif offrespecialevenment.niveau == 'silver' %}
											<li><span class="badge badge-silver" style="color: silver;">Silver users</span></li>
										{% elseif offrespecialevenment.niveau == 'gold' %}
											<li><span class="badge badge-gold" style="color: gold;">Gold users</span></li>
										{% endif %}
										<!-- Add more badge elements as needed -->
									</ul>
								</div>
							</div>
						</div>
					{% endfor %}
				</div>
							
		</div>
	</section>
	
	{% endblock %}

	
	
	
